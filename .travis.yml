dist: xenial
language:
  - cpp
compiler:
  - gcc
addons:
  apt:
    sources:
      - sourceline: 'deb http://packages.ros.org/ros/ubuntu xenial main'
      - key_url: http://packages.ros.org/ros.key
    packages:
      - python-catkin-pkg
      - python-rosdep
      - python-catkin-tools
      - python-catkin-lint
      - ros-kinetic-catkin
install:
  - sudo rosdep init
  - rosdep update
  - mkdir -p /tmp/ws/src
  - ln -s `pwd` /tmp/ws/src/webrtc
  - cd /tmp/ws/src
  - git clone --depth=1 https://github.com/WPI-RAIL/async_web-server_cpp.git
  - cd /tmp/ws
  - rosdep install --from-paths src --ignore-src --rosdistro kinetic -y

script:
  - cd /tmp/ws
  - source /opt/ros/kinetic/setup.bash
  - catkin init
  - catkin config --install
  - catkin build -p1 -j4 --no-status
  - source install/setup.bash
  - catkin_lint src/webrtc

